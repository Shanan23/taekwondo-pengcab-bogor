<%- include('../partials/header') %>

<div class="container py-5">
  <div class="row mb-4">
    <div class="col-12">
      <h1 class="text-center mb-4">Hubungi Kami</h1>
      <p class="lead text-center">Kami siap membantu dan menjawab pertanyaan Anda seputar Taekwondo di Bogor</p>
    </div>
  </div>

  <div class="row">
    <!-- Contact Information -->
    <div class="col-md-5 mb-4 mb-md-0">
      <div class="card shadow-sm h-100">
        <div class="card-body">
          <h3 class="card-title mb-4">Informasi Kontak</h3>
          
          <div class="d-flex mb-4">
            <div class="flex-shrink-0">
              <i class="fas fa-map-marker-alt fa-2x text-primary"></i>
            </div>
            <div class="ms-3">
              <h5>Alamat Kantor</h5>
              <p>Jl. Pajajaran No. 123<br>Kota Bogor, Jawa Barat 16143</p>
            </div>
          </div>
          
          <div class="d-flex mb-4">
            <div class="flex-shrink-0">
              <i class="fas fa-phone fa-2x text-primary"></i>
            </div>
            <div class="ms-3">
              <h5>Telepon</h5>
              <p>+62 251 8374XXX</p>
            </div>
          </div>
          
          <div class="d-flex mb-4">
            <div class="flex-shrink-0">
              <i class="fas fa-envelope fa-2x text-primary"></i>
            </div>
            <div class="ms-3">
              <h5>Email</h5>
              <p>info@taekwondobogor.org</p>
            </div>
          </div>
          
          <div class="d-flex mb-4">
            <div class="flex-shrink-0">
              <i class="fas fa-clock fa-2x text-primary"></i>
            </div>
            <div class="ms-3">
              <h5>Jam Operasional</h5>
              <p>Senin - Jumat: 08.00 - 16.00<br>Sabtu: 09.00 - 13.00<br>Minggu: Tutup</p>
            </div>
          </div>
          
          <div class="mt-4">
            <h5>Ikuti Kami</h5>
            <div class="d-flex mt-3">
              <a href="#" class="me-3 text-dark fs-4"><i class="fab fa-facebook"></i></a>
              <a href="#" class="me-3 text-dark fs-4"><i class="fab fa-instagram"></i></a>
              <a href="#" class="me-3 text-dark fs-4"><i class="fab fa-youtube"></i></a>
              <a href="#" class="text-dark fs-4"><i class="fab fa-tiktok"></i></a>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Contact Form -->
    <div class="col-md-7">
      <div class="card shadow-sm">
        <div class="card-body">
          <h3 class="card-title mb-4">Kirim Pesan</h3>
          <form id="contact-form" class="needs-validation" novalidate>
            <div class="row g-3">
              <div class="col-md-6">
                <label for="name" class="form-label">Nama Lengkap</label>
                <input type="text" class="form-control" id="name" required>
                <div class="invalid-feedback">
                  Nama lengkap wajib diisi
                </div>
              </div>
              
              <div class="col-md-6">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" required>
                <div class="invalid-feedback">
                  Email wajib diisi dengan format yang benar
                </div>
              </div>
              
              <div class="col-md-6">
                <label for="phone" class="form-label">Nomor Telepon</label>
                <input type="tel" class="form-control" id="phone">
              </div>
              
              <div class="col-md-6">
                <label for="subject" class="form-label">Subjek</label>
                <select class="form-select" id="subject" required>
                  <option value="" selected disabled>Pilih subjek...</option>
                  <option value="info">Informasi Umum</option>
                  <option value="event">Event & Kejuaraan</option>
                  <option value="membership">Keanggotaan</option>
                  <option value="training">Pelatihan</option>
                  <option value="other">Lainnya</option>
                </select>
                <div class="invalid-feedback">
                  Silakan pilih subjek pesan
                </div>
              </div>
              
              <div class="col-12">
                <label for="message" class="form-label">Pesan</label>
                <textarea class="form-control" id="message" rows="5" required></textarea>
                <div class="invalid-feedback">
                  Pesan wajib diisi
                </div>
              </div>
              
              <div class="col-12">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="terms" required>
                  <label class="form-check-label" for="terms">
                    Saya menyetujui bahwa data yang saya berikan akan digunakan untuk keperluan komunikasi
                  </label>
                  <div class="invalid-feedback">
                    Anda harus menyetujui ketentuan ini
                  </div>
                </div>
              </div>
              
              <div class="col-12 mt-4">
                <button type="submit" class="btn btn-primary px-4 py-2">
                  <i class="fas fa-paper-plane me-2"></i>Kirim Pesan
                </button>
                <div class="mt-3" id="form-result"></div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Map -->
  <div class="row mt-5">
    <div class="col-12">
      <div class="card shadow-sm">
        <div class="card-body p-0">
          <h3 class="card-title p-4 m-0 border-bottom">Lokasi Kami</h3>
          <div class="ratio ratio-21x9">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d126829.54633808364!2d106.73531121328123!3d-6.597576799999992!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69c5c147d7b575%3A0x5f16ca15605d79a1!2sKota%20Bogor%2C%20Jawa%20Barat!5e0!3m2!1sid!2sid!4v1656490142548!5m2!1sid!2sid" 
                    width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade"></iframe>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- JavaScript for form validation and submission -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form');
    const resultDiv = document.getElementById('form-result');
    
    form.addEventListener('submit', function(event) {
      event.preventDefault();
      
      if (!form.checkValidity()) {
        event.stopPropagation();
        form.classList.add('was-validated');
        return;
      }
      
      // Collect form data
      const formData = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        subject: document.getElementById('subject').value,
        message: document.getElementById('message').value
      };
      
      // Show loading indicator
      resultDiv.innerHTML = '<div class="alert alert-info">Mengirim pesan...</div>';
      
      // Submit form data to API
      fetch('/api/contact/submit', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData)
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          resultDiv.innerHTML = `<div class="alert alert-success">${data.message}</div>`;
          form.reset();
          form.classList.remove('was-validated');
        } else {
          resultDiv.innerHTML = `<div class="alert alert-danger">${data.message}</div>`;
        }
      })
      .catch(error => {
        console.error('Error submitting form:', error);
        resultDiv.innerHTML = '<div class="alert alert-danger">Terjadi kesalahan. Silakan coba lagi nanti.</div>';
      });
    });
  });
</script>

<%- include('../partials/footer') %>